# Phase 2 Implementation: School Management & Security

## üõ°Ô∏è Security Strategy: The Short-Lived Token Pattern
As per the core Axion architecture, we have implemented the two-tier token strategy:

1.  **Identity (Long Token)**: Received upon successful login. It represents the user's permanent identity but should **not** be used for daily API requests.
2.  **Session (Short Token)**: Generated by exchanging the Long Token. This is the token required for all protected routes (Schools, Classrooms, etc.).

### üîÑ The Authentication Flow
To interact with the APIs, follow these steps in order:

1.  **Login**: `POST /api/user/login` -> returns `longToken`.
2.  **Exchange**: `POST /api/token/v1_createShortToken`
    *   **Header**: `Authorization: Bearer <longToken>`
    *   **Returns**: `shortToken`.
3.  **Authorized Request**: `POST /api/school/createSchool`
    *   **Header**: `Authorization: Bearer <shortToken>`
    *   **Result**: Success!

---

## üè´ School Management Features
1.  **CRUD Operations**:
    *   `createSchool`: Restricted to **Superadmins**.
    *   `getSchools`: 
        *   Superadmins see all schools.
        *   School Admins see only their own school.
    *   `updateSchool` / `deleteSchool`: Restricted to **Superadmins**.
2.  **RBAC (SharkFin)**: All permissions are managed via the SharkFin engine, ensuring that business logic is decoupled from security rules.
3.  **Schema**: Added `schoolOwner` and established relationships between Users (Admins) and Schools.

## üöÄ How to Test
1.  Start the app: `npm run dev`
2.  Open Swagger: `http://localhost:5111/api-docs`
3.  Use the `signup` route with the `ADMIN_SIGNUP_KEY` from `.env`.
4.  Follow the **Authentication Flow** described above.
